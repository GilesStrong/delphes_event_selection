PREFIX=/exper-sw/cmst3/cmssw/users/giles/programs/
ROOTCFLAGS=$(shell $(PREFIX)bin/root-config --cflags)
ROOTLIBS=$(shell $(PREFIX)bin/root-config --libs)
DELPHES=$(PREFIX)Delphes-3.3.2/
C++ = g++
C_FLAGS = -g
INCLUDES = -I$(PREFIX)/include -I$(DELPHES) -I$(DELPHES)/external -IClassicSVfit-master/interface
LIBRARIES = -lGenVector -lRooFit -lRooFitCore -lMinuit -O2 -lboost_regex -lboost_filesystem -lboost_system -L$(PREFIX)/lib -lDelphes -L$(DELPHES)
ROOT = $(ROOTCFLAGS) $(ROOTLIBS)
FLAGS =  $(INCLUDES) $(LIBRARIES) $(C_FLAGS) $(ROOT)
OBJS = main.o delphesReader.o ClassicSVfit.o ClassicSVfitIntegrand.o MeasuredTauLepton.o svFitAuxFunctions.o svFitHistogramAdapter.o SVfitIntegratorMarkovChain.o
SVFIT=ClassicSVfit-master/interface/ClassicSVfitIntegrand.h ClassicSVfit-master/interface/MeasuredTauLepton.h ClassicSVfit-master/interface/svFitHistogramAdapter.h ClassicSVfit-master/interface/svFitAuxFunctions.h ClassicSVfit-master/interface/SVfitIntegratorMarkovChain.h ClassicSVfit-master/interface/ClassicSVfit.h

delphes_event_selection: $(OBJS)
	$(C++) $(OBJS) -o delphes_event_selection $(FLAGS) 
	
main.o: main.cc main.hh finalstateCuts.hh delphesReader.h $(SVFIT) myMethods.hh
	$(C++) -c main.cc $(FLAGS)  
	
delphesReader.o: delphesReader.C delphesReader.h
	$(C++) -c delphesReader.C $(FLAGS)  
	
ClassicSVfit.o: ClassicSVfit-master/src/ClassicSVfit.cc $(SVFIT)
	$(C++) -c ClassicSVfit-master/src/ClassicSVfit.cc $(FLAGS)
	
ClassicSVfitIntegrand.o: ClassicSVfit-master/src/ClassicSVfitIntegrand.cc $(SVFIT)
	$(C++) -c ClassicSVfit-master/src/ClassicSVfitIntegrand.cc $(FLAGS)

MeasuredTauLepton.o: ClassicSVfit-master/src/MeasuredTauLepton.cc $(SVFIT)
	$(C++) -c ClassicSVfit-master/src/MeasuredTauLepton.cc $(FLAGS)
	
svFitAuxFunctions.o: ClassicSVfit-master/src/svFitAuxFunctions.cc $(SVFIT)
	$(C++) -c ClassicSVfit-master/src/svFitAuxFunctions.cc $(FLAGS)
	
svFitHistogramAdapter.o: ClassicSVfit-master/src/svFitHistogramAdapter.cc $(SVFIT)
	$(C++) -c ClassicSVfit-master/src/svFitHistogramAdapter.cc $(FLAGS)
	
SVfitIntegratorMarkovChain.o: ClassicSVfit-master/src/SVfitIntegratorMarkovChain.cc $(SVFIT)
	$(C++) -c ClassicSVfit-master/src/SVfitIntegratorMarkovChain.cc $(FLAGS)                                

clean:                                              
	rm ./*.o ./*~ ./\#*